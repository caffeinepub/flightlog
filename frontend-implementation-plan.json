{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Flight Record Update and Delete Operations",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Fix the edit/update mutation for flight log entries so that submitting the EditFlightEntryModal successfully updates the record in the backend and reflects the change in the UI without errors",
      "acceptanceCriteria": [
        "Opening the edit modal for a flight entry pre-populates all fields correctly",
        "Submitting the edit form calls the backend update function with the correct entry ID and updated data",
        "After a successful update, the flight records table reflects the new values immediately",
        "No console errors or unhandled rejections occur during the edit flow"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Fix the useEditFlightEntry mutation hook to correctly pass the entryId and updatedEntry to the backend updateFlightEntry function. Ensure the mutation invalidates the flight entries query cache on success to trigger a UI refresh. Add proper error handling to catch and display backend errors."
        },
        {
          "path": "frontend/src/components/EditFlightEntryModal.tsx",
          "operation": "modify",
          "description": "Ensure the modal correctly captures and passes the entryId from the selected flight entry to the mutation. Verify all form fields are properly bound to the entry data and that date/time calculations use the timeCalculations utility correctly. Add error state display for mutation failures and success feedback before closing the modal."
        },
        {
          "path": "frontend/src/components/FlightRecordsTable.tsx",
          "operation": "modify",
          "description": "Verify the edit action correctly passes the full flight entry object including its ID to the EditFlightEntryModal. Ensure the table re-renders when the flight entries query is invalidated after a successful update."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Fix the delete operation for flight log entries so that confirming deletion in the FlightRecordsTable confirmation dialog successfully removes the record from the backend and updates the table",
      "acceptanceCriteria": [
        "Clicking the delete action on a flight entry opens the confirmation dialog",
        "Confirming deletion calls the backend delete function with the correct entry ID",
        "The deleted entry is removed from the flight records table immediately after confirmation",
        "No console errors or unhandled rejections occur during the delete flow"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Fix the useDeleteFlightEntry mutation hook to correctly pass the entryId parameter to the backend deleteFlightEntry function. Ensure the mutation invalidates both the flight entries query and any aggregated queries (aircraft summaries, student hours) on success. Add proper error handling with user-friendly error messages."
        },
        {
          "path": "frontend/src/components/FlightRecordsTable.tsx",
          "operation": "modify",
          "description": "Ensure the delete confirmation dialog captures the correct entryId from the selected flight entry and passes it to the delete mutation. Verify the confirmation dialog closes on successful deletion and displays any error messages. Add loading state to the delete button during mutation execution."
        }
      ]
    }
  ]
}